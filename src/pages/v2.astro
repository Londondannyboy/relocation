---
import { sql } from '../lib/db';
import SEO from '../components/SEO.astro';
import Schema from '../components/Schema.astro';

// Fetch homepage content
const homepageContent = await sql`
  SELECT section_type, title, subtitle, content
  FROM homepage_content
  WHERE site = 'relocation' AND is_active = true
  ORDER BY section_order ASC
`;

const sections = {
  hero: homepageContent.find((s: any) => s.section_type === 'hero'),
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <SEO />
  <Schema type="homepage" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      overflow-x: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      background-size: 200% 200%;
      animation: gradientShift 10s ease infinite;
    }

    .fade-in-up {
      animation: fadeInUp 1s ease-out forwards;
      opacity: 0;
    }

    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }

    .pulse-animate {
      animation: pulse 2s ease-in-out infinite;
    }

    .float-animate {
      animation: float 6s ease-in-out infinite;
    }

    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
  </style>
</head>
<body>
  <!-- Test Banner -->
  <div style="background: yellow; color: black; text-align: center; padding: 10px; font-weight: bold;">
    ðŸš€ V2 TEST PAGE - If you see animations, this works!
  </div>

  <!-- Simple Animated Hero -->
  <section class="gradient-bg min-h-screen flex items-center justify-center relative overflow-hidden">
    <!-- Floating shapes -->
    <div style="position: absolute; top: 100px; left: 100px; width: 300px; height: 300px; background: rgba(255,255,255,0.1); border-radius: 50%; filter: blur(60px);" class="float-animate"></div>
    <div style="position: absolute; bottom: 100px; right: 100px; width: 400px; height: 400px; background: rgba(255,255,255,0.15); border-radius: 50%; filter: blur(80px); animation-delay: 2s;" class="float-animate"></div>

    <div class="relative z-10 text-center px-6 max-w-5xl mx-auto">
      <!-- Badge -->
      <div class="inline-flex items-center px-6 py-3 rounded-full glass border border-white/30 mb-8 fade-in-up">
        <span style="width: 10px; height: 10px; background: #10b981; border-radius: 50%; margin-right: 12px;" class="pulse-animate"></span>
        <span class="text-white font-semibold">V2 - Now with REAL animations!</span>
      </div>

      <!-- Title -->
      <h1 class="text-6xl md:text-7xl lg:text-8xl font-black text-white mb-8 leading-tight fade-in-up delay-100" style="text-shadow: 0 10px 40px rgba(0,0,0,0.3);">
        {sections.hero?.title || "Chief of Staff Recruitment"}
      </h1>

      <!-- Subtitle -->
      <p class="text-2xl md:text-3xl text-white/90 mb-12 font-light leading-relaxed fade-in-up delay-200">
        {sections.hero?.subtitle || "The ultimate guide to recruitment agencies"}
      </p>

      <!-- CTAs -->
      <div class="flex flex-col sm:flex-row gap-6 justify-center fade-in-up delay-300">
        <a href="/companies" style="background: white; color: #667eea; padding: 18px 40px; border-radius: 50px; font-weight: bold; font-size: 18px; text-decoration: none; display: inline-flex; align-items: center; box-shadow: 0 10px 40px rgba(0,0,0,0.2); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05) translateY(-2px)'; this.style.boxShadow='0 20px 60px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.2)'">
          Get Started â†’
        </a>
        <a href="/articles" class="glass" style="color: white; padding: 18px 40px; border-radius: 50px; font-weight: bold; font-size: 18px; text-decoration: none; border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
          Read Articles
        </a>
      </div>

      <!-- Stats -->
      <div class="grid grid-cols-3 gap-8 mt-24 max-w-3xl mx-auto fade-in-up delay-400">
        <div class="text-center">
          <div class="text-5xl font-black text-white mb-2">2025</div>
          <div class="text-white/70 font-medium">Latest Data</div>
        </div>
        <div class="text-center" style="border-left: 1px solid rgba(255,255,255,0.2); border-right: 1px solid rgba(255,255,255,0.2);">
          <div class="text-5xl font-black text-white mb-2">Top</div>
          <div class="text-white/70 font-medium">Agencies</div>
        </div>
        <div class="text-center">
          <div class="text-5xl font-black text-white mb-2">100%</div>
          <div class="text-white/70 font-medium">Comprehensive</div>
        </div>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div style="position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); animation: float 3s ease-in-out infinite;">
      <svg width="24" height="24" fill="none" stroke="white" stroke-width="2" opacity="0.6">
        <path d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
      </svg>
    </div>
  </section>

  <!-- Simple content section to show scroll -->
  <section style="padding: 100px 20px; background: white; text-align: center;">
    <h2 style="font-size: 48px; font-weight: 900; color: #1f2937; margin-bottom: 24px;">
      If you see smooth animations above...
    </h2>
    <p style="font-size: 24px; color: #6b7280; max-width: 800px; margin: 0 auto;">
      The gradient should be shifting colors, text should have faded in from below with delays,
      the badge should have a pulsing green dot, floating shapes should be moving,
      and buttons should scale on hover.
    </p>
    <div style="margin-top: 40px;">
      <a href="/" style="background: #667eea; color: white; padding: 16px 32px; border-radius: 12px; text-decoration: none; font-weight: 600; display: inline-block;">
        Back to Current Homepage
      </a>
    </div>
  </section>
</body>
</html>
